<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">

<head>
<div th:replace="~{flagment/admin/adminHead :: adminHeadFragment}"></div>
<style>
	/* CSS cho modal container */
	.modal {
		display: none;
		/* Ẩn modal ban đầu */
		position: fixed;
		top: 40%;
		left: 59%;
		transform: translate(-50%, -50%);
		width: 25%;
		/* Điều chỉnh kích thước modal theo nhu cầu */
		height: 190px;
		/* Điều chỉnh kích thước modal theo nhu cầu */
		background-color: white;
		border: 1px solid #ccc;
		box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
		text-align: center;
		overflow: hidden;
		animation: slideUp 0.5s ease-in-out;
		/* Animation xuất hiện từ dưới lên */
	}

	/* CSS cho nút đóng modal */
	.close {
		position: absolute;
		top: 10px;
		right: 10px;
		cursor: pointer;
	}

	/* CSS cho iframe bên trong modal */
	.modal iframe {
		width: 100%;
		height: 100%;
		border: none;
	}

	/* Định nghĩa animation slideUp */
	@keyframes slideUp {
		0% {
			transform: translate(-50%, 100%);
		}

		100% {
			transform: translate(-50%, -50%);
		}
	}
</style>
</head>
<body class="hold-transition skin-blue sidebar-mini" ng-app="app">
	<div class="wrapper">
		<!-- Preloader -->
		<div
			class="preloader flex-column justify-content-center align-items-center">
			<img class="animation__wobble" src="/img/banner/logotitle.png"
				alt="AdminLTELogo" height="60" width="60">
		</div>

		<div th:replace="~{flagment/admin/adminHeader :: adminHeaderFragment}"></div>
		<div
			th:replace="~{flagment/admin/adminMainSidebar :: adminMainSidebarFragment}"></div>
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0">Quản lý sản phẩm</h1>
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="/devex/home">Trang chủ</a></li>
								<li class="breadcrumb-item active">Tổng quan</li>
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->

			<!-- Main content -->
			<section class="content" ng-controller="product">
				<input id="username" type="text" th:value="${username}" hidden>
				<input id="idproduct" type="text" th:value="${idproduct}" hidden>
				<div class="container-fluid">
                    <!-- Chọn sản phẩm -->
					<div class="row">
                        <div class="col-12">
                            <h1>Thông tin sản phẩm</h1>
							<!-- Thông tin sản phẩm -->

							<!-- Hình ảnh -->
							<div class="card form-group px-3">
								<label class="p-0">Hình ảnh</label>
								<!-- Hình ảnh -->
							<div class="card form-group px-3">
								<label class="p-0">Hình ảnh</label>
								<!-- Hiển thị hình ảnh -->
								<div class="row">
									<label class="col-1" title="Click vào hình ảnh 2 lần để xóa"
										ng-repeat="filename in filenames">
										<img alt="" class="img-fluid" ng-src="{{filename}}"
											ng-dblclick="deleteimg(filename)">
									</label>
									<div class="col-2">
										<!-- Chọn file -->
										<input id="fileInput" style="display: none;" type="file" multiple="multiple"
											onchange="angular.element(this).scope().uploadimg(this.files)">
										<button class="btn btn-primary mb-2" onclick="openFilePicker()">Thêm</button>
										<!-- END chọn file -->
									</div>
									<!-- END Hiển thị hình ảnh -->

								</div>
							</div>
							<!-- END Hình ảnh -->
							<!-- Thông tin sản phẩm -->
							<div>
								<form action="" method="post">
									<div class="card p-3">
										<!-- Tên sản phẩm -->
										<div class="form-group">
											<label>Tên sản phẩm</label>
											<input class="form-control" ng-model="form.name"
												placeholder="Nhập tên sản phẩm">
										</div>
										<!-- END Tên sản phẩm -->

										<!-- COMBOBOX AND SEARCH -->
										<div class="row">
											<div class="form-group col-6">
												<label>Loại sản phẩm</label>
												<select id="brands" class="form-control select2" style="width: 100%;"
													ng-change="getbrand()" ng-model="selectedbrand"
													ng-options="brand.id as brand.name for brand in brands">
												</select>
											</div>
										</div>
										<!-- END COMBOBOX SEARCH -->
										<!-- Loại sản phẩm -->
										<div class="row">
											<div class="form-group col-6">
												<label>Loại sản phẩm</label>
												<select id="categorys" class="form-control select2" style="width: 100%;"
													ng-change="getCategoryDetails()" ng-model="selectedCategory"
													ng-options="category.id as category.name for category in categorys">
												</select>
											</div>
											<div class="form-group col-6">
												<label>Loại chi tiết</label>
												<select id="categorydt" class="form-control select2"
													style="width: 100%;" ng-model="selectedCategoryDetail"
													ng-options="catedt.id as catedt.name for catedt in categorydetail">
												</select>
											</div>
										</div>
										<!-- END Loại sản phẩm -->
										<div class="form-group">
											<label for="exampleFormControlTextarea1">Mô tả sản phẩm</label>
											<textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
												ng-model="form.description"></textarea>
										</div>
										<div ng-if="checkbutton == false" class="form-check form-switch">
											<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" ng-model="form.active" ng-checked="form.active">
											<label class="form-check-label" for="flexSwitchCheckDefault">Trạng thái bán</label>
										</div>
									</div>
								</form>
							</div>
							<!-- END Thông tin sản phẩm -->
							<!--Table size -->
							<div class="card">
								<div class="card-header">
									<h3 class="card-title font-weight-bold">Chi tiết sản phẩm</h3>
								</div>
								<!-- /.card-header -->
								<div class="card-body">
									<table class="table table-bordered text-center" id="data-table">
										<thead>
											<tr>
												<th style="width: 10px">Kích cỡ</th>
												<th>Màu sắc</th>
												<th>Giá tiền</th>
												<th style="width: 40px">Số lượng hàng</th>
											</tr>
										</thead>
										<tbody id="table-body" ng-repeat="item in variant">
											<tr>
												<td><input type="text" ng-model="item.size"></td>
												<td><input type="text" ng-model="item.color"></td>
												<td><input type="text" ng-model="item.price"></td>
												<td><input type="text" ng-model="item.quantity"></td>
												<td>
													<button class="btn btn-danger"
														ng-click="deleteproductvariant(item.id)">
														<i class="fa-regular fa-trash-can"></i>
													</button>
												</td>
											</tr>
										</tbody>
									</table>
									<button id="add-row-btn" class="btn btn-primary mt-2" ng-click="addRow()">Thêm chi
										tiết sản phẩm</button>
								</div>

							</div>
							<!-- /.card -->
							<!-- END TABLE SIZe -->
							<div class="text-center">
								<button ng-if="checkbutton == false" class="btn btn-primary" ng-click="save()">Lưu</button>
								<button ng-if="checkbutton == false" class="btn btn-primary" ng-click="deleteProduc()">Xóa</button>
								<button ng-if="checkbutton == true" ng-click="cancelRequest(idrq)" class="btn btn-danger">
									<i class="fa-solid fa-xmark"></i> Hủy yêu cầu
								</button>
								<button ng-if="checkbutton == true" ng-click="confirmRequest(idrq)" class="btn btn-success">
									<i class="fa-solid fa-check"></i> Chấp nhận yêu cầu
								</button>
							</div>

							<div class="text-center">
								<button id="successbtn" hidden>Lưu</button>
								<button id="failsebtn" hidden>Xóa</button>
							</div>

							<div id="successModal" class="modal">
								<div class="modal-content">
									<span class="close">&times;</span>
									<iframe
										src="https://lottie.host/?file=b88a887a-bdb0-4353-9bf1-6fe27e3eb9f1/FboQjv554S.json"></iframe>
									<span id="content" class="text-success fs-3">Thêm thành công</span>
								</div>
							</div>

							<div id="failseModal" class="modal">
								<div class="modal-content">
									<span class="close">&times;</span>
									<iframe
										src="https://lottie.host/?file=51cd8b56-3c50-45f1-a51f-9e1ae1a50534/RwZN1jyiA0.json"></iframe>
									<span id="contentfalse" class="text-danger fs-3">Thêm thất bại</span>
								</div>
							</div>
                        </div>
                    </div>
				</div>
				<!-- /.container-fluid -->
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<div th:replace="~{flagment/admin/adminFooter :: adminFooterFragment}"></div>
		<div
			th:replace="~{flagment/admin/adminFootLink :: adminFootLinkFragment}"></div>
	</div>

</body>
<script src="/admin/dist/js/handMade.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
<script src="/js/admin/formProduct.js"></script>
</html>